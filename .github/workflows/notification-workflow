# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0

name: Notification Workflow

# global environment variables to all jobs
env:
  SOLUTION_ORG: aws-solutions
  SOLUTION_NAME: my-red-solution

on:
  workflow_dispatch:
    # Inputs the workflow accepts.
    inputs:
      pipeline_status:
        description: "Status of the pipeline part running on AWS"
        required: true        
        default: "Succeeded"
        type: choice
        options:
        - Succeeded
        - Failed
      param_x:
        description: "description of parameter x"
        default: "1234"
        required: true

jobs:

  notification-job:
    name: Notification Job
    runs-on: ubuntu-latest
    steps:
      - name: Update build status
        env:
          PIPELINE_STATUS: ${{ github.event.inputs.pipeline_status }}
          PARAM_X: ${{ github.event.inputs.param_x }}
        run: |
          echo "TODO: Implement processing notification"
          export SOLUTION_NAME=${{ env.SOLUTION_NAME }}
          
          echo "Received pipeline_status: $PIPELINE_STATUS"
          echo "Received param_x: $PARAM_X"
          echo "DEBUG: Dump env"
          env
